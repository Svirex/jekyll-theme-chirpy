---
title: Sandbox::Write(Day007) Правка утечек памяти и написание подсистемы ввода
author: Артём Воробьёв aka svirex
date: 2020-04-03 00:01:00 +0400
categories: [Coding, Sandbox]
---

В этот раз на реализацию подсистемы ввода потребовалось больше времени, чем один день, я даже считать не стал. Заодно поправил ошибки, связанные с утечкой памяти.

## Что сделано

Не буду приводить здесь код даже интерфейсов классов. Просто опишу список того, что сделал.

1. Поправил ошибки утечек памяти. Создавал объекты через `new` и не удалял их. Зачесались руки сделать какой-нибудь класс для дебага, который бы считал созданные и удаленные объекты.

2. Реализовал класс `InputSystem`, который ответственен за сбор данных со всех устройств ввода. Теперь в каждом акторе и компоненте вместо прямого запроса состояния устройств вводы мы просто получаем объект класса `InputState`, где хранится состояние клавиатуры и мыши. 

3. Реализовал классы `FPSActor`, `FPSCamera`. Теперь можно перемещаться в пространстве.

Ниже результат.

<iframe width="560" height="315" src="https://www.youtube.com/embed/tvvr9-oHlYM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Ссылка на [GitHub](https://github.com/Svirex/sandbox/tree/SandboxDay007)

## TODO

* Добавить документацию Doxygen к класса и функциям
* Сделать класс для свободного перемещения `FreeActor` в пространстве и возможности переключения между `FreeActor` и `FPSActor`
* Создать класс `InputComponent`, который отвечает за обработку пользовательского ввода и установки величин скорости актора.

Так как тудушки начинают расти, сделал [доску в Trello](https://trello.com/b/8eOk7S6f/sandbox)
